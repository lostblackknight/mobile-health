FROM openjdk:11.0.15-oraclelinux7

ENV JAR_FILE=bee-health-topic.jar

ENV SPRING_PROFILES_ACTIVE=prod

ENV NACOS_SERVICE_HOST=localhost
ENV NACOS_SERVICE_PORT=8848

ENV MYSQL_SERVICE_HOST=localhost
ENV MYSQL_SERVICE_PORT=3306
ENV MYSQL_SERVICE_DB=bee_health_topic
ENV MYSQL_SERVICE_USERNAME=root
ENV MYSQL_SERVICE_PASSWORD=root

ENV REDIS_SERVICE_HOST=localhost
ENV REDIS_SERVICE_PORT=6379

ENV JVM_XMS=100m
ENV JVM_XMX=100m
ENV JVM_USER_TIMEZONE=GMT+8

EXPOSE 7009

WORKDIR /app

COPY ./${JAR_FILE} ./

ENTRYPOINT java -Xmx${JVM_XMX} -Xms${JVM_XMS} -Duser.timezone=${JVM_USER_TIMEZONE} -jar ${JAR_FILE} -Dspring.profiles.active=${SPRING_PROFILES_ACTIVE}